<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagamento | Casa de Vinho</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://kit.fontawesome.com/9e62b207e5.js" crossorigin="anonymous"></script>
</head>
<body>

  <div class="frete-bar">
    <span>üöö Frete gr√°tis acima de R$ 199,00 Brasil inteiro</span>
  </div>

  <header class="topo checkout-topo">
    <a class="logo" href="index.html">üç∑ Casa de Vinho</a>
  </header>

  <main class="checkout-page page-wrapper">
    <section class="checkout-card">
      <h1>Pagamento</h1>

      <div id="resumo-pedido" class="checkout-lista"></div>

      <h3 style="color: var(--accent-contrast); margin-top: 16px;">Selecione o m√©todo de pagamento</h3>
      <div class="checkout-lista" style="text-align: left;">
        <label><input type="radio" name="metodo" value="pix" checked> üí† Pix (5% de desconto)</label>
        <label><input type="radio" name="metodo" value="cartao"> üí≥ Cart√£o de Cr√©dito</label>
        <label><input type="radio" name="metodo" value="boleto"> üßæ Boleto Banc√°rio</label>
      </div>

      <button id="btn-pagar" class="checkout-btn-big">Pagar Agora</button>

      <p id="msg-pagamento" class="checkout-msg"></p>
    </section>
  </main>

  <footer class="footer">
    <p>¬© 2025 Casa de Vinho üçá</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const resumo = document.getElementById("resumo-pedido");
      const msg = document.getElementById("msg-pagamento");
      const btn = document.getElementById("btn-pagar");

      const itens = JSON.parse(localStorage.getItem("pedidoItens")) || [];
      const total = localStorage.getItem("pedidoTotal") || "R$ 0,00";

      if (!itens.length) {
        resumo.innerHTML = "<p style='color: var(--text-muted)'>Nenhum pedido encontrado.</p>";
        return;
      }

      let html = "";
      itens.forEach(item => {
        html += `<div class="checkout-item">
          <div class="item-nome">${item.qtd}x ${item.nome}</div>
          <div class="item-preco">${(item.preco).toLocaleString("pt-BR", { style: "currency", currency: "BRL" })} cada</div>
        </div>`;
      });
      html += `<p class="checkout-total">Total a pagar: <strong>${total}</strong></p>`;
      resumo.innerHTML = html;

      btn.addEventListener("click", () => {
        const metodo = document.querySelector('input[name="metodo"]:checked').value;
        msg.textContent = `Pagamento via ${metodo.toUpperCase()} confirmado! üç∑ Obrigado pela compra.`;

        // limpa o carrinho e dados
        localStorage.removeItem("pedidoItens");
        localStorage.removeItem("pedidoTotal");
        localStorage.removeItem("carrinho");
      });
    });
  </script>

</body>
</html>
